DESCRIPTION

This program performs the statistical analysis of a set of avalanches generated by a set of time series. Specifically, this code computes
avalanche size and duration distribution (using log-spaced bins), the average size of avalanches as a function of their duration and it 
computes the maximum likelihood estimators of the power law exponents of the above distributions and performs a linear regression between 
the log of the average size and the log of the duration. More details about the analysis are given in the Supplemental Material of our 
paper (see below).

Results of the systematic analysis of time series generated by several different systems are reported in

https://arxiv.org/abs/2109.00116

Please acknowledge the use of this software by citing the paper above.


#################################
#################################


BASIC INSTRUCTIONS

To run the program and perform the analysis, just type

python3 avalanches.py dataset delta

where "dataset" is a string that specifies the name of the file containing the time series and "delta" is the temporal resolution to be
used to coarse-grain the time series in avalanches.



#################################
#################################


DETAILS ABOUT THE INPUT/OUTPUT PARAMETERS AND FILES


The input file MUST be structured as follows:

Ka t1 t2 t3 \n
Kb t1 t2 t3 t4 t5 \n
.
.
.
Kn t1 t2 \n

where:

Ka, Kb,..., Kn is an integer specifying the number of events that compose the time series a, b,..., n respectively. In the example 
above we would have Ka=3, Kb=5, Kn=2. t1 t2 ... is the time series, i.e., a sequence of chronologically ordered interevent times. 
The last interevent time, in our implementation, represents the distance between the end of the temporal window and the last event time. 
It thus does not represent an event. The present implementation of the code assumes that the time series are stored in a file whose name is 

X_ts.txt

with X = dataset, the same string given in input. The code further assumes that the file is contained in the folder '..', i.e., 
the folder that contains the present folder. The code further assumes that the present folder contains the folder `res`, 
where results are stored. Results are stored in a file with name

X_deltaY_avalanches.npy

with X = dataset, the same string given in input and Y the value of delta used to perform the analysis, i.e., the value passed
as second argument to the code. The results file can be read and results can be visualized as shown in the notebook 
"weibo_full_analysis.ipynb".


#################################
#################################


EXAMPLE


To run the code on the WEIBO dataset type using the optimal resolution we identified in our work, type

./TS_phase_diag.out weibo 8413

Results of the analysis will be printed in the file

weibo_delta8413_avalanches.npy

